(function(e){function t(t){for(var n,l,r=t[0],c=t[1],o=t[2],d=0,f=[];d<r.length;d++)l=r[d],s[l]&&f.push(s[l][0]),s[l]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,o||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,r=1;r<i.length;r++){var c=i[r];0!==s[c]&&(n=!1)}n&&(a.splice(t--,1),e=l(l.s=i[0]))}return e}var n={},s={app:0},a=[];function l(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=e,l.c=n,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(i,n,function(t){return e[t]}.bind(null,n));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var o=0;o<r.length;o++)t(r[o]);var u=c;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var n=i("64a9"),s=i.n(n);s.a},"56d7":function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("097d");var n=i("2b0e"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("sprite")],1)},a=[],l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"css-sprite"},[i("div",{staticClass:"bd"},[i("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[i("el-collapse-item",{attrs:{title:e.i18n("language"),name:"language"}},[i("div",[i("el-button",{attrs:{size:"mini",type:"zh"===e.lang.active?"success":"info"},on:{click:function(t){e.selectLanguage("zh")}}},[e._v(e._s(e.i18n("zh")))]),i("el-button",{attrs:{size:"mini",type:"en"===e.lang.active?"success":"info"},on:{click:function(t){e.selectLanguage("en")}}},[e._v(e._s(e.i18n("English")))])],1)]),i("el-collapse-item",{attrs:{title:e.i18n("setting"),name:"setting"}},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",{attrs:{label:e.i18n("width")}},[i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},model:{value:e.width,callback:function(t){e.width=e._n(t)},expression:"width"}})],1),i("el-form-item",{attrs:{label:e.i18n("height")}},[i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},model:{value:e.height,callback:function(t){e.height=e._n(t)},expression:"height"}})],1),i("el-form-item",{attrs:{label:e.i18n("padding")}},[i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},model:{value:e.padding,callback:function(t){e.padding=e._n(t)},expression:"padding"}})],1),i("el-form-item",{attrs:{label:e.i18n("num")}},[i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},model:{value:e.num,callback:function(t){e.num=e._n(t)},expression:"num"}})],1),i("el-form-item",{attrs:{label:e.i18n("className")}},[i("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.className,callback:function(t){e.className=t},expression:"className"}})],1)],1),i("el-form",{attrs:{inline:!0}},[i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.selectFile}},[e._v(e._s(e.i18n("selectFile")))]),i("input",{ref:"file",staticClass:"hidden",attrs:{type:"file",accept:"image/*",multiple:"multiple"},on:{change:e.fileChange}}),i("a",{ref:"download",staticClass:"hidden",attrs:{href:e.base64Url,download:"sprite.png"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.clear}},[e._v(e._s(e.i18n("clear")))])],1),i("el-form-item",[i("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.save}},[e._v(e._s(e.i18n("save")))])],1),i("el-form-item",[i("el-button",{attrs:{type:"warning",size:"mini"},on:{click:e.build}},[e._v(e._s(e.i18n("build")))])],1),i("el-form-item",[i("el-button",{attrs:{type:"warning",size:"mini"},on:{click:e.preview}},[e._v(e._s(e.i18n("preview")))])],1)],1)],1),i("el-collapse-item",{attrs:{title:e.i18n("operatingSpace"),name:"handler"}},[i("el-row",{attrs:{type:"flex"}},[i("el-col",{attrs:{span:8}},[i("div",{staticClass:"table-box scoll"},[i("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.files,"empty-text":e.i18n("empty"),size:"mini",height:e.cxtHeight<300?300:e.cxtHeight}},[i("el-table-column",{attrs:{prop:"path",label:e.i18n("picture")},scopedSlots:e._u([{key:"default",fn:function(e){return[i("img",{attrs:{src:e.row.data,alt:"scope.name"}})]}}])}),i("el-table-column",{attrs:{label:e.i18n("handler")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"handler-icon"},[i("i",{staticClass:"el-icon-arrow-up",on:{click:function(i){e.fileHandler("up",t)}}}),i("i",{staticClass:"el-icon-arrow-down",on:{click:function(i){e.fileHandler("down",t)}}}),i("i",{staticClass:"el-icon-close",on:{click:function(i){e.fileHandler("close",t)}}})])]}}])})],1)],1)]),i("el-col",{attrs:{span:16}},[i("div",{staticClass:"canvas-box"},[i("canvas",{ref:"canvas",attrs:{width:e.cxtWidth+"px",height:e.cxtHeight+"px"},on:{mousedown:e.onmousedown,mousemove:e.onmousemove,mouseup:e.onmouseup}})])])],1)],1),i("el-collapse-item",{attrs:{title:e.i18n("cssGenerator"),name:"style"}},[i("div",{staticClass:"style-box"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.style,expression:"style"}],domProps:{value:e.style},on:{input:function(t){t.target.composing||(e.style=t.target.value)}}})])]),i("el-collapse-item",{attrs:{title:e.i18n("preview"),name:"preview"}},[e.isPreview?i("div",{ref:"preview",staticClass:"preview",style:"width: "+(e.cxtWidth+2)+"px; height: "+(e.cxtHeight+e.height)+"px"},[i("div",{staticClass:"bg"},e._l(e.files,function(t,n){return i("div",{key:n,class:e.className+"s "+e.className+"-"+n,style:"width: "+e.width+"px; height: "+e.height+"px;"})}),0)]):e._e()])],1)],1)])},r=[],c=(i("ac6a"),i("a745")),o=i.n(c),u=(i("7f7f"),i("5d73")),d=i.n(u),f=i("795b"),h=i.n(f),p={name:"sprite",data:function(){return{activeNames:["language","setting","handler"],style:"",styleEl:null,base64Url:"",className:"cs-icon",isPreview:!1,width:32,height:32,padding:1,num:15,cxt:null,files:[],drag:!1,offsetX:0,offsetY:0,selecteIndex:0,imgBuffer:null,lang:{active:"zh",en:{language:"语言 Language",zh:"中文"},zh:{language:"语言 Language",zh:"中文",height:"高度",width:"宽度",fileName:"文件名",selectFile:"选择文件",setting:"设置区",operatingSpace:"操作区",handler:"操作",padding:"间距",num:"每排个数",build:"生成",clear:"清空",save:"保存",preview:"预览",picture:"图片",empty:"暂无数据",cssGenerator:"生成CSS"}}}},computed:{local:function(){return this.lang[this.lang.active]||{}},cxtWidth:function(){return(this.width+2*this.padding)*this.num},cxtHeight:function(){return(this.height+2*this.padding)*Math.ceil(this.files.length/this.num)}},methods:{selectLanguage:function(e){this.lang.active=e},i18n:function(e){return this.local[e]||e},getIndex:function(e){var t=~~(e.offsetX/(this.width+2*this.padding)),i=~~(e.offsetY/(this.height+2*this.padding));return t+this.num*i},onmousedown:function(e){this.drag=!0,this.offsetX=e.offsetX%(this.width+2*this.padding),this.offsetY=e.offsetY%(this.height+2*this.padding),this.selecteIndex=this.getIndex(e)},onmousemove:function(e){this.drag&&this.build({index:this.selecteIndex,x:e.offsetX-this.offsetX,y:e.offsetY-this.offsetY})},onmouseup:function(e){if(this.drag){var t=this.getIndex(e);this.drag=!1,this.selecteIndex!==t&&this.exchange(this.files,this.selecteIndex,t),this.build(),this.createStyle()}},readfile:function(e){return new h.a(function(t,i){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=function(e){i(e)},n.readAsDataURL(e)})},fileChange:function(){var e=this,t=this.$refs.file,i=[],n=t.length,s=!0,a=!1,l=void 0;try{for(var r,c=function(){var t=r.value;e.readfile(t).then(function(s){i.push({file:t,img:null,data:s,name:t.name}),n--,n||(e.files=i,e.build(),e.createStyle())})},o=d()(t.files);!(s=(r=o.next()).done);s=!0)c()}catch(u){a=!0,l=u}finally{try{s||null==o.return||o.return()}finally{if(a)throw l}}},selectFile:function(){this.$refs.file.click()},fileHandler:function(e,t){var i=this;"up"===e?t.$index>0&&this.exchange(this.files,t.$index,t.$index-1):"down"===e?t.$index<this.files.length-1&&this.exchange(this.files,t.$index,t.$index+1):"close"===e&&this.files.splice(t.$index,1),this.$nextTick(function(){i.build(),i.createStyle()})},exchange:function(e,t,i){o()(e)&&t>=0&&t<e.length&&i>=0&&i<e.length&&e.splice(t,1,e.splice(i,1,e[t])[0])},loadImg:function(e){return new h.a(function(t){if(e.img)t(e);else{var i=new Image;i.onload=function(){e.img=i,t(e)},i.src=e.data}})},build:function(e){var t,i=this,n=0,s=this.cxt;s.clearRect(0,0,this.cxtWidth,this.cxtHeight),this.files.forEach(function(a,l){i.loadImg(a).then(function(a){if(e&&l===e.index)t=a;else{var r=l%i.num*(i.width+2*i.padding)+i.padding,c=~~(l/i.num)*(i.height+2*i.padding)+i.padding;i.drawImage(s,a,r,c)}n++,n===i.files.length&&t&&i.drawImage(s,t,e.x,e.y)})})},drawImage:function(e,t,i,n){e.drawImage(t.img,i,n,this.width,this.height)},createStyle:function(){var e=this,t=this.files.map(function(t,i){var n=i%e.num*(e.width+2*e.padding),s=~~(i/e.num)*(e.height+2*e.padding);return"\n    .".concat(e.className||"cs-icon","s.").concat(e.className||"cs-icon","-").concat(i,"{\n      background-position: ").concat(n?-n:n,"px ").concat(s?-s:s,"px;\n    }")});this.style=["\n    .".concat(this.className||"cs-icon","s{\n      background-image: url(").concat(this.blobUrl||"",");\n      background-repeat: no-repeat;\n      padding: ").concat(0|this.padding,"px;\n      display: inline-block;\n      float: left;\n      border-right: 1px solid #eee;\n      border-bottom: 1px solid #eee;\n      margin-right: -1px;\n      margin-bottom: -1px;\n    }")].concat(t).join("")},clear:function(){this.style="",this.files.splice(0)},preview:function(){var e=this;this.files.length&&(this.isPreview=!0,this.$refs.canvas.toBlob(function(t){e.blobUrl=URL.createObjectURL(t),e.createStyle(),e.styleEl?e.styleEl.innerHTML=e.style:(e.styleEl=document.createElement("style"),e.styleEl.innerHTML=e.style,e.$refs.preview.appendChild(e.styleEl)),e.activeNames.indexOf("preview")<0&&e.activeNames.push("preview")}))},save:function(){var e=this;this.files.length&&(this.base64Url=this.$refs.canvas.toDataURL("image/png"),setTimeout(function(){e.$refs.download.click()}))}},mounted:function(){this.cxt=this.$refs.canvas.getContext("2d")}},m=p,g=(i("9359"),i("2877")),v=Object(g["a"])(m,l,r,!1,null,"736a30d5",null);v.options.__file="sprite.vue";var x=v.exports,b={name:"app",components:{sprite:x}},w=b,y=(i("034f"),Object(g["a"])(w,s,a,!1,null,null,null));y.options.__file="App.vue";var _=y.exports,k=i("5c96"),S=i.n(k);i("0fae");n["default"].config.productionTip=!1,n["default"].use(S.a),new n["default"]({render:function(e){return e(_)}}).$mount("#app")},"64a9":function(e,t,i){},"750d":function(e,t,i){},9359:function(e,t,i){"use strict";var n=i("750d"),s=i.n(n);s.a}});
//# sourceMappingURL=app.52024382.js.map