(function(e){function t(t){for(var n,l,r=t[0],o=t[1],c=t[2],h=0,d=[];h<r.length;h++)l=r[h],Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&d.push(s[l][0]),s[l]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,r=1;r<i.length;r++){var o=i[r];0!==s[o]&&(n=!1)}n&&(a.splice(t--,1),e=l(l.s=i[0]))}return e}var n={},s={app:0},a=[];function l(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=e,l.c=n,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(i,n,function(t){return e[t]}.bind(null,n));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=o;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";i("64a9")},5336:function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("sprite")],1)},a=[],l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"css-sprite"},[i("div",{staticClass:"bd"},[i("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[i("el-collapse-item",{attrs:{title:e.i18n("language"),name:"language"}},[i("div",[i("el-button",{attrs:{size:"mini",type:"zh"===e.lang.active?"success":"info"},on:{click:function(t){return e.selectLanguage("zh")}}},[e._v(e._s(e.i18n("zh")))]),i("el-button",{attrs:{size:"mini",type:"en"===e.lang.active?"success":"info"},on:{click:function(t){return e.selectLanguage("en")}}},[e._v(e._s(e.i18n("English")))])],1)]),i("el-collapse-item",{attrs:{title:e.i18n("setting"),name:"setting"}},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",{attrs:{label:e.i18n("width")}},[i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},on:{change:e.inputChange},model:{value:e.width,callback:function(t){e.width=e._n(t)},expression:"width"}})],1),i("el-form-item",{attrs:{label:e.i18n("height")}},[i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},on:{change:e.inputChange},model:{value:e.height,callback:function(t){e.height=e._n(t)},expression:"height"}})],1),i("el-form-item",{attrs:{label:e.i18n("padding")}},[i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},on:{change:e.inputChange},model:{value:e.padding,callback:function(t){e.padding=e._n(t)},expression:"padding"}})],1),i("el-form-item",{attrs:{label:e.i18n("num")}},[i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},on:{change:e.inputChange},model:{value:e.num,callback:function(t){e.num=e._n(t)},expression:"num"}})],1),i("el-form-item",{attrs:{label:e.i18n("className")}},[i("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.className,callback:function(t){e.className=t},expression:"className"}})],1),i("el-form-item",{attrs:{label:e.i18n("classNameMode")}},[i("el-radio-group",{attrs:{size:"mini"},on:{change:function(t){return e.preview(!1)}},model:{value:e.classNameMode,callback:function(t){e.classNameMode=t},expression:"classNameMode"}},[i("el-radio-button",{attrs:{label:"name"}},[e._v(e._s(e.i18n("fileName")))]),i("el-radio-button",{attrs:{label:"index"}},[e._v(e._s(e.i18n("arrayIndex")))])],1)],1)],1),i("el-form",{attrs:{inline:!0}},[i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.selectFile}},[e._v(e._s(e.i18n("selectFile")))]),i("input",{ref:"file",staticClass:"hidden",attrs:{type:"file",accept:"image/*",multiple:"multiple"},on:{change:e.fileChange}}),i("a",{ref:"download",staticClass:"hidden",attrs:{href:e.blobUrl,download:"sprite.png"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.clear}},[e._v(e._s(e.i18n("clear")))])],1),i("el-form-item",[i("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.save}},[e._v(e._s(e.i18n("save")))])],1),i("el-form-item",[i("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.build}},[e._v(e._s(e.i18n("build")))])],1),i("el-form-item",[i("el-button",{attrs:{type:"warning",size:"mini"},on:{click:e.preview}},[e._v(e._s(e.i18n("preview")))])],1)],1)],1),i("el-collapse-item",{attrs:{title:e.i18n("operatingSpace"),name:"handler"}},[i("el-row",{attrs:{type:"flex"}},[i("el-col",{attrs:{span:24}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.files.length,expression:"files.length"}],staticClass:"canvas-box",class:{draging:e.drag},style:"padding: "+e.boxPadding+"px",on:{mousedown:e.onmousedown,mousemove:e.onmousemove,mouseup:e.onmouseup,mouseleave:e.mouseleave}},[i("canvas",{ref:"canvas",attrs:{width:e.cxtWidth+"px",height:e.cxtHeight+"px"}})])])],1)],1),i("el-collapse-item",{attrs:{title:e.i18n("cssGenerator"),name:"style"}},[i("div",{staticClass:"style-box"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.style,expression:"style"}],domProps:{value:e.style},on:{input:function(t){t.target.composing||(e.style=t.target.value)}}})])]),i("el-collapse-item",{attrs:{title:e.i18n("preview"),name:"preview"}},[e.isPreview?i("div",{ref:"preview",staticClass:"preview",style:"width: "+(e.cxtWidth+2)+"px; height: "+(e.cxtHeight+e.height)+"px"},[i("div",{staticClass:"bg"},e._l(e.files,(function(t,n){return i("div",{key:n,class:e.className+"s "+e.className+"-"+{name:t.name,index:n}[e.classNameMode],style:"width: "+e.width+"px; height: "+e.height+"px;"})})),0)]):e._e()])],1)],1)])},r=[];i("ac4d"),i("8a81"),i("5df3"),i("1c4c"),i("6b54"),i("a481"),i("ac6a"),i("28a5"),i("7f7f");function o(e,t){var i="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=c(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,r=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return l=e.done,e},e:function(e){r=!0,a=e},f:function(){try{l||null==i.return||i.return()}finally{if(r)throw a}}}}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var h={name:"sprite",data:function(){return{activeNames:["language","setting","handler"],style:"",styleEl:null,blobUrl:"",className:"cs-icon",classNameMode:"name",isPreview:!1,width:32,height:32,cxtWidth:32,cxtHeight:32,padding:1,num:15,cxt:null,files:[],drag:!1,isSave:!1,offsetX:0,offsetY:0,selecteIndex:0,imgBuffer:null,notice:{state:0,build:{type:"success",title:"环境创建成功!",message:"请在 操作区 对图片进行调整",duration:3e3},guide:{title:"操作指南",dangerouslyUseHTMLString:!0,message:'<ol style="list-style: disc;"><li>交换图片位置: <br />  选择图片并拖动到其它图片位置上</li><li>删除图片: <br />  选择图片并拖动到浅蓝色边框区域</li></ol>',duration:0}},lang:{active:"zh",en:{language:"语言 Language",zh:"中文"},zh:{language:"语言 Language",zh:"中文",height:"高度",width:"宽度",fileName:"文件名",selectFile:"选择文件",setting:"设置区",operatingSpace:"操作区",handler:"操作",padding:"间距",num:"每排个数",build:"生成",clear:"清空",save:"保存",preview:"预览",picture:"图片",empty:"暂无数据",cssGenerator:"生成CSS",classNameMode:"class名称模式",arrayIndex:"数组索引"}}}},computed:{local:function(){return this.lang[this.lang.active]||{}},boxPadding:function(){return 32}},methods:{inputChange:function(){this.refresh()},selectLanguage:function(e){this.lang.active=e},i18n:function(e){return this.local[e]||e},getIndex:function(e){var t=0,i=~~((e.offsetX-t)/(this.width+2*this.padding)),n=~~((e.offsetY-t)/(this.height+2*this.padding));return i+this.num*n},onmousedown:function(e){/canvas/i.test(e.target.tagName)&&(this.drag=!0,this.offsetX=e.offsetX%(this.width+2*this.padding),this.offsetY=e.offsetY%(this.height+2*this.padding),this.selecteIndex=this.getIndex(e))},mouseleave:function(e){this.drag&&this.onmouseup(e)},onmousemove:function(e){if(this.drag){var t=/canvas/i.test(e.target.tagName),i=t?0:this.boxPadding;this.build({index:this.selecteIndex,x:e.offsetX-this.offsetX-i,y:e.offsetY-this.offsetY-i})}},onmouseup:function(e){if(this.drag){var t=/canvas/i.test(e.target.tagName),i=this.getIndex(e);this.drag=!1,this.isSave=!1,t?this.selecteIndex!==i&&this.exchange(this.files,this.selecteIndex,i):this.files.splice(this.selecteIndex,1),this.refresh()}},readfile:function(e){return new Promise((function(t,i){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=function(e){i(e)},n.readAsDataURL(e)}))},fileChange:function(){var e=this,t=this.$refs.file,i=[],n=t.files.length;0===this.notice.state&&n&&(this.notice.state=5,this.$notify.closeAll(),this.$notify(this.notice.build),this.$nextTick((function(){e.$notify(e.notice.guide)})));var s,a=o(t.files);try{var l=function(){var t=s.value;e.readfile(t).then((function(s){var a="string"!==typeof t.name||"."===t.name[0]?"__empty__":t.name.split(".").slice(0,-1).join(".");i.push({file:t,img:null,data:s,name:a}),n--,n||(e.files=i,e.refresh())}))};for(a.s();!(s=a.n()).done;)l()}catch(r){a.e(r)}finally{a.f()}},selectFile:function(){this.$refs.file.click()},fileHandler:function(e,t){"close"===e?this.removeItem(t.$index):this.exchange(this.files,t.$index,t.$index+("up"===e?-1:1)),this.refresh()},exchange:function(e,t,i){Array.isArray(e)&&t>=0&&t<e.length&&i>=0&&i<e.length&&e.splice(t,1,e.splice(i,1,e[t])[0])},removeItem:function(e){this.files.splice(e,1)},loadImg:function(e){return new Promise((function(t){if(e.img)t(e);else{var i=new Image;i.onload=function(){e.img=i,t(e)},i.src=e.data}}))},refresh:function(){var e=this;this.$nextTick((function(){e.build(),e.createStyle()}))},build:function(e){var t,i=this,n=0,s=this.cxt;this.cxtWidth=(this.width+2*this.padding)*this.num,this.cxtHeight=(this.height+2*this.padding)*Math.ceil(this.files.length/this.num),s.clearRect(0,0,this.cxtWidth,this.cxtHeight),this.files.forEach((function(a,l){i.loadImg(a).then((function(a){e&&l===e.index?t=a:i.drawImage(s,a,l%i.num*(i.width+2*i.padding)+i.padding,~~(l/i.num)*(i.height+2*i.padding)+i.padding),n++,n===i.files.length&&t&&i.drawImage(s,t,e.x,e.y)}))}))},drawImage:function(e,t,i,n){var s,a,l=t.img,r=l.width,o=l.height,c=r,u=o,h=r>o?o/r:r/o;r>=this.width&&o>=this.height?(c=this.width*h,u=this.height*h):r>this.width?u=this.width*h:o>this.height&&(c=this.width*h),s=(this.width-c)/2,a=(this.height-u)/2,e.drawImage(t.img,i+s,n+a,c,u)},createStyle:function(){var e=this,t=this.files.map((function(t,i){var n=i%e.num*(e.width+2*e.padding),s=~~(i/e.num)*(e.height+2*e.padding),a={name:t.name,index:i};return".".concat(e.className||"cs-icons","s.").concat(e.className||"cs-icon","-").concat(a[e.classNameMode],"{\n            background-position: ").concat(n?-n:n,"px ").concat(s?-s:s,"px;\n          }\n        ")}));this.style=[".".concat(this.className||"cs-icons","s{\n          background-image: url(").concat(this.blobUrl||"",");\n          background-repeat: no-repeat;\n          padding: ").concat(0|this.padding,"px;\n          display: inline-block;\n          float: left;\n          border-right: 1px solid #eee;\n          border-bottom: 1px solid #eee;\n          margin-right: -1px;\n          margin-bottom: -1px;\n        }\n        ")].concat(t).join("").replace(/\s{9}/g,"\n")},clear:function(){this.style="",this.files.splice(0)},preview:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.files.length&&(t&&(this.isPreview=!0),this.$refs.canvas.toBlob((function(t){e.blobUrl=URL.createObjectURL(t),e.createStyle(),e.$refs.preview&&(e.styleEl?e.styleEl.innerHTML=e.style:(e.styleEl=document.createElement("style"),e.styleEl.innerHTML=e.style,e.$refs.preview.appendChild(e.styleEl))),e.activeNames.indexOf("preview")<0&&e.activeNames.push("preview")})))},save:function(){var e=this;this.files.length&&(this.blobUrl=this.$refs.canvas.toDataURL("image/png"),setTimeout((function(){e.$refs.download.click()})))}},mounted:function(){console.log(this),this.cxt=this.$refs.canvas.getContext("2d")}},d=h,f=(i("9c1a"),i("2877")),m=Object(f["a"])(d,l,r,!1,null,"0a9e3940",null),p=m.exports,g={name:"app",components:{sprite:p}},v=g,b=(i("034f"),Object(f["a"])(v,s,a,!1,null,null,null)),y=b.exports,x=i("5c96"),w=i.n(x);i("0fae");n["default"].config.productionTip=!1,n["default"].use(w.a),new n["default"]({render:function(e){return e(y)}}).$mount("#app")},"64a9":function(e,t,i){},"9c1a":function(e,t,i){"use strict";i("5336")}});
//# sourceMappingURL=app.7410b334.js.map